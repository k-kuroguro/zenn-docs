---
title: "ã‚ªãƒ ãƒ‹ãƒ›ã‚¤ãƒ¼ãƒ«ã®æ–¹å‘è¨ˆç®—"
emoji: "ğŸ§®"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: []
published: true
---

# ã‚ªãƒ ãƒ‹ãƒ›ã‚¤ãƒ¼ãƒ«ã¨ã¯

https://www.youtube.com/watch?v=oCm66wa7ZS4

**ã‚ªãƒ ãƒ‹ãƒ›ã‚¤ãƒ¼ãƒ«** (Omni Wheel) ã¨ã¯, ä¸Šã®å‹•ç”»ã®ãƒ­ãƒœãƒƒãƒˆã«å–ã‚Šä»˜ã‘ã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ãª, å›è»¢æ–¹å‘ã¨å‚ç›´ã«å›è»¢ã™ã‚‹ãƒ­ãƒ¼ãƒ©ãƒ¼ã‚’å‚™ãˆã‚‹ãƒ›ã‚¤ãƒ¼ãƒ«ã®ã“ã¨ã§ã‚ã‚‹. ã“ã‚Œã‚‰ã®ãƒ­ãƒ¼ãƒ©ãƒ¼ã«ã‚ˆã‚Š, å…¨æ–¹å‘ã«ç§»å‹•ã™ã‚‹ã“ã¨ã‚’å¯èƒ½ã¨ã—ã¦ã„ã‚‹.

![å›³1. ã‚ªãƒ ãƒ‹ãƒ›ã‚¤ãƒ¼ãƒ«](https://upload.wikimedia.org/wikipedia/commons/e/e3/Triple_Rotacaster_commercial_industrial_omni_wheel.jpg)
*å›³1. ã‚ªãƒ ãƒ‹ãƒ›ã‚¤ãƒ¼ãƒ«. Rotacaster, [CC BY 1.0](https://creativecommons.org/licenses/by/1.0), via Wikimedia Commons.*

å›³2ã«ç¤ºã™ã‚ˆã†ãª $45\degree$ é–“éš”ã®å˜ç´”ãªç§»å‹•ã§ã¯, ãƒ›ã‚¤ãƒ¼ãƒ«ã®å›è»¢æ–¹å‘ã®ã¿ã§ç§»å‹•æ–¹å‘ã‚’æ±ºå®šã§ãã‚‹. ã—ã‹ã—, $15\degree$ ã‚„ $165\degree$ æ–¹å‘ã«ç§»å‹•ã•ã›ãŸã„å ´åˆã¯è¨ˆç®—ãŒå¿…è¦ã«ãªã‚‹. ã“ã®è¨˜äº‹ã§ã¯, ãã®è¨ˆç®—æ–¹æ³•ã«ã¤ã„ã¦è¨˜ã™.

![å›³2. ãƒ­ãƒœãƒƒãƒˆã®ç§»å‹•æ–¹å‘ã¨ãƒ›ã‚¤ãƒ¼ãƒ«ã®å›è»¢æ–¹å‘ã®é–¢ä¿‚](/images/2653b3d92536da/simple_movement.png)
*å›³2. ãƒ­ãƒœãƒƒãƒˆã®ç§»å‹•æ–¹å‘ã¨ãƒ›ã‚¤ãƒ¼ãƒ«ã®å›è»¢æ–¹å‘ã®é–¢ä¿‚*

# ãƒ›ã‚¤ãƒ¼ãƒ«ã®è§’é€Ÿåº¦ã®å°å‡º

ã‚ªãƒ ãƒ‹ãƒ›ã‚¤ãƒ¼ãƒ«ã‚’3è¼ªæ­è¼‰ã—ãŸå…¨æ–¹ä½ãƒ­ãƒœãƒƒãƒˆã‚’ä¾‹ã¨ã—ã¦è€ƒãˆ, å„ãƒ›ã‚¤ãƒ¼ãƒ«ã®è§’é€Ÿåº¦ã‚’æ±‚ã‚ã¦ã¿ã‚‹. ãƒ­ãƒœãƒƒãƒˆã®å„è¦ç´ ã®é‹å‹•å­¦çš„é–¢ä¿‚ã‚’è¡¨ã™ãƒ¢ãƒ‡ãƒ«ã‚’å›³3ã«ç¤ºã™.

<!-- begin ignore -->
![å›³3. å…¨æ–¹ä½ãƒ­ãƒœãƒƒãƒˆã®é‹å‹•å­¦çš„ãƒ¢ãƒ‡ãƒ«](/images/2653b3d92536da/kinematic_model_of_omni_directional_robot.png =500x)
*å›³3. å…¨æ–¹ä½ãƒ­ãƒœãƒƒãƒˆã®é‹å‹•å­¦çš„ãƒ¢ãƒ‡ãƒ«*

ã¾ãš, ãƒ­ãƒœãƒƒãƒˆã®ç’°å¢ƒã‚’è¡¨ã™ã‚°ãƒ­ãƒ¼ãƒãƒ«åº§æ¨™ $[x,y]$ ã‚’å®šç¾©ã™ã‚‹. ã‚°ãƒ­ãƒ¼ãƒãƒ«åº§æ¨™ã«ãŠã‘ã‚‹ãƒ­ãƒœãƒƒãƒˆã®ä½ç½®ã¨å‘ããƒ»é€Ÿåº¦ã¯ãã‚Œãã‚Œ $(\boldsymbol{x},\boldsymbol{y},\boldsymbol{\theta}), (\dot{\boldsymbol{x}},\dot{\boldsymbol{y}}, \dot{\boldsymbol{\theta}})$ ã¨è¡¨ã›ã‚‹.

ç¶šã„ã¦, ãƒ­ãƒ¼ã‚«ãƒ«åº§æ¨™ $[x_{\mathrm{L}},y_{\mathrm{L}}]$ ã‚‚å®šç¾©ã™ã‚‹. ãƒ­ãƒ¼ã‚«ãƒ«åº§æ¨™ã®ä¸­å¿ƒã¯ãƒ­ãƒœãƒƒãƒˆã®é‡å¿ƒã¨ä¸€è‡´ã™ã‚‹. 3ã¤ã®ã‚ªãƒ ãƒ‹ãƒ›ã‚¤ãƒ¼ãƒ«ã¯ãƒ­ãƒ¼ã‚«ãƒ«åº§æ¨™ç³»ã«å¯¾ã—, è§’åº¦ $\alpha_i (i=1,2,3)$ ã§é…ç½®ã•ã‚Œã¦ã„ã‚‹. è»¸ $x_{\mathrm{L}}$ ã‚’å§‹ç‚¹, åæ™‚è¨ˆå›ã‚Šã‚’æ­£ã¨ã™ã‚‹ã¨, $\alpha_1 = 0\degree, \alpha_2 = 120\degree, \alpha_3 = 240\degree$ ã¨ãªã‚‹.
<!-- end ignore -->

ä»¥ä¸Šã®å®šç¾©ã‹ã‚‰, ãƒ›ã‚¤ãƒ¼ãƒ«ã®ç§»å‹•é€Ÿåº¦ $\boldsymbol{v}_i$ ã‚’æ±‚ã‚ã¦ã„ã. $\boldsymbol{v}_i$ ã¯, ç´”ç²‹ãªä¸¦é€²é€Ÿåº¦ã¨å›è»¢é€Ÿåº¦ã«åˆ†ã‘ã‚‹ã“ã¨ãŒã§ãã‚‹.

$$
\boldsymbol{v}_i=\boldsymbol{v}_{\mathrm{trans},i}+\boldsymbol{v}_{\mathrm{rot}}
$$

ã¾ãš, ä¸¦é€²é€Ÿåº¦ã«ã¤ã„ã¦è€ƒãˆã‚‹. å›³4ã«ãƒ›ã‚¤ãƒ¼ãƒ« $1$ ã«ãŠã‘ã‚‹ä¸¦é€²é€Ÿåº¦ $\boldsymbol{v}_{\mathrm{trans},1}$ ã‚’æ‹¡å¤§ã—ãŸã‚‚ã®ã‚’ç¤ºã™.

<!-- begin ignore -->
![å›³4. ãƒ™ã‚¯ãƒˆãƒ«æ‹¡å¤§å›³](/images/2653b3d92536da/enlarged_figure_of_vector.png =400x)
*å›³4. ãƒ™ã‚¯ãƒˆãƒ«æ‹¡å¤§å›³*

ãƒ™ã‚¯ãƒˆãƒ« $\boldsymbol{v}_{\mathrm{trans},1}$ ã‚’ãƒ™ã‚¯ãƒˆãƒ« $\dot{\boldsymbol{x}}, \dot{\boldsymbol{y}}$ ã«å†™åƒã™ã‚‹ã¨æ¬¡å¼ãŒå¾—ã‚‰ã‚Œã‚‹.
<!-- end ignore -->

$$
\boldsymbol{v}_{\mathrm{trans},1}=-\sin{(\theta})\dot{\boldsymbol{x}}+\cos{(\theta)}\dot{\boldsymbol{y}}
$$

ãƒ™ã‚¯ãƒˆãƒ« $\boldsymbol{v}_i$ ãŒ $\theta+\alpha_i$ ã«é…ç½®ã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’è€ƒæ…®ã™ã‚Œã°, ã“ã®ãƒ™ã‚¯ãƒˆãƒ«å†™åƒã‚’å…¨ã¦ã®ãƒ›ã‚¤ãƒ¼ãƒ«ã«å¯¾ã—ã¦ä¸€èˆ¬åŒ–ã§ãã‚‹.

$$
\boldsymbol{v}_{\mathrm{trans},i}=-\sin{(\theta+\alpha_i})\dot{\boldsymbol{x}}+\cos{(\theta+\alpha_i)}\dot{\boldsymbol{y}}
$$

ç¶šã„ã¦, å›è»¢é€Ÿåº¦ã«ã¤ã„ã¦è€ƒãˆã‚‹. ãƒ­ãƒœãƒƒãƒˆãŒç´”ç²‹ã«å›è»¢ã™ã‚‹å ´åˆ, ä»¥ä¸‹ã®æ¡ä»¶ã‚’æº€ãŸã™.

$$
\boldsymbol{v}_{\mathrm{rot}}=R\dot{\boldsymbol{\theta}}
$$

ã“ã“ã§, $R$ ã¯ãƒ­ãƒœãƒƒãƒˆã®é‡å¿ƒã‹ã‚‰ãƒ›ã‚¤ãƒ¼ãƒ«ã¾ã§ã®åŠå¾„ã«æ²¿ã£ãŸè·é›¢ã§ã‚ã‚‹.

ä»¥ä¸Šã‚ˆã‚Š, æ¬¡å¼ãŒå°ã‹ã‚Œã‚‹.

$$
\begin{align}
   \boldsymbol{v}_i=-\sin{(\theta+\alpha_i})\dot{\boldsymbol{x}}+\cos{(\theta+\alpha_i)}\dot{\boldsymbol{y}}+R\dot{\boldsymbol{\theta}}
\end{align}
$$

ã“ã‚Œã¾ã§ã§, å„ãƒ›ã‚¤ãƒ¼ãƒ«ã®ç§»å‹•é€Ÿåº¦ã‚’ãƒ­ãƒœãƒƒãƒˆã®ç§»å‹•é€Ÿåº¦ã«çµåˆã§ããŸã®ã§, æ¬¡ã¯ãƒ›ã‚¤ãƒ¼ãƒ«ã®è§’é€Ÿåº¦ã‚’é–¢é€£ä»˜ã‘ã¦ã„ã.

$$
\begin{align}
   \boldsymbol{v}_i=r\dot{\boldsymbol{\phi}}_i
\end{align}
$$

ã“ã“ã§, $r$ ã¯ãƒ›ã‚¤ãƒ¼ãƒ«ã®åŠå¾„ã§ã‚ã‚‹.

<!-- begin ignore -->
ã“ã“ã§, å¼$(1)$ã«å¼$(2)$ã‚’ä»£å…¥ã—ã¦
<!-- end ignore -->

$$
\dot{\boldsymbol{\phi}}_i=\frac{1}{r}(-\sin{(\theta+\alpha_i})\dot{\boldsymbol{x}}+\cos{(\theta+\alpha_i)}\dot{\boldsymbol{y}}+R\dot{\boldsymbol{\theta}})
$$

ä¸Šå¼ã¯, å¼$(3)$,$(4)$ã®ã‚ˆã†ãªè¡Œåˆ—è¡¨ç¾ã«å¤‰æ›ã§ãã‚‹.

$$
\begin{align}
   \underline{\dot{\boldsymbol{\phi}}}=\boldsymbol{J}_{\mathrm{inv}}\underline{\dot{\boldsymbol{u}}}
\end{align}
$$

<!-- begin ignore -->
ã“ã“ã§, $\boldsymbol{J}_{\mathrm{inv}}$ ã¯ãƒ­ãƒœãƒƒãƒˆã®é€†ãƒ¤ã‚³ãƒ“ã‚¢ãƒ³ã§ã‚ã‚Š, ãƒ›ã‚¤ãƒ¼ãƒ«ã®å„é€Ÿåº¦ $\dot{\boldsymbol{\phi}}$ ã¨ãƒ­ãƒœãƒƒãƒˆã®é€Ÿåº¦ãƒ™ã‚¯ãƒˆãƒ« $\dot{\boldsymbol{u}}$ ã®é–¢ä¿‚ã‚’è¡¨ã™.
<!-- end ignore -->

$$
\begin{align}
   \begin{bmatrix}
      \dot{\boldsymbol{\phi}}_1\\
      \dot{\boldsymbol{\phi}}_2\\
      \dot{\boldsymbol{\phi}}_3\\
   \end{bmatrix}
   =
   \frac{1}{r}
   \begin{bmatrix}
      -\sin{(\theta)}&\cos{(\theta)}&R\\
      -\sin{(\theta+\alpha_2)}&\cos{(\theta+\alpha_2)}&R\\
      -\sin{(\theta+\alpha_3)}&\cos{(\theta+\alpha_3)}&R\\
   \end{bmatrix}
   \begin{bmatrix}
      \dot{\boldsymbol{x}}\\
      \dot{\boldsymbol{y}}\\
      \dot{\boldsymbol{\theta}}\\
   \end{bmatrix}
\end{align}
$$

ä¸Šå¼ã¯, ã‚°ãƒ­ãƒ¼ãƒãƒ«åº§æ¨™ç³»ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚, ä»¥ä¸‹ã®å¼ã§ãƒ­ãƒ¼ã‚«ãƒ«åº§æ¨™ç³»ã«å¤‰æ›ã™ã‚‹.

$$
\begin{align}
   \begin{bmatrix}
      \dot{\boldsymbol{x}}\\
      \dot{\boldsymbol{y}}\\
      \dot{\boldsymbol{\theta}}\\
   \end{bmatrix}
   =
   \begin{bmatrix}
      \cos{(\theta)}&0&0\\
      0&\cos{(\theta)}&0\\
      0&0&1\\
   \end{bmatrix}
   \begin{bmatrix}
      \dot{\boldsymbol{x}_{\mathrm{L}}}\\
      \dot{\boldsymbol{y}_{\mathrm{L}}}\\
      \dot{\boldsymbol{\theta}}\\
   \end{bmatrix}
\end{align}
$$

<!-- begin ignore -->
å¼$(5)$ã‚’å¼$(4)$ã«ä»£å…¥ã—
<!-- end ignore -->

$$
\begin{align}
   \begin{bmatrix}
      \dot{\boldsymbol{\phi}}_1\\
      \dot{\boldsymbol{\phi}}_2\\
      \dot{\boldsymbol{\phi}}_3\\
   \end{bmatrix}
   =
   \frac{1}{r}
   \begin{bmatrix}
      -\sin{(\theta)}&\cos{(\theta)}&R\\
      -\sin{(\theta+\alpha_2)}&\cos{(\theta+\alpha_2)}&R\\
      -\sin{(\theta+\alpha_3)}&\cos{(\theta+\alpha_3)}&R\\
   \end{bmatrix}
   \begin{bmatrix}
      \cos{(\theta)}&0&0\\
      0&\cos{(\theta)}&0\\
      0&0&1\\
   \end{bmatrix}
   \begin{bmatrix}
      \dot{\boldsymbol{x}_{\mathrm{L}}}\\
      \dot{\boldsymbol{y}_{\mathrm{L}}}\\
      \dot{\boldsymbol{\theta}}\\
   \end{bmatrix}
\end{align}
$$

å¼$(6)$ã¯, ãƒ›ã‚¤ãƒ¼ãƒ«æ•°ã«å¯¾ã—ã¦ä¸€èˆ¬åŒ–ã§ãã‚‹.

$$
\begin{align*}
   \begin{bmatrix}
      \dot{\boldsymbol{\phi}}_1\\
      \dot{\boldsymbol{\phi}}_2\\
      \vdots\\
      \dot{\boldsymbol{\phi}}_n\\
   \end{bmatrix}
   =
   \frac{1}{r}
   \begin{bmatrix}
      -\sin{(\theta)}&\cos{(\theta)}&R\\
      -\sin{(\theta+\alpha_2)}&\cos{(\theta+\alpha_2)}&R\\
      \vdots&\vdots&\vdots\\
      -\sin{(\theta+\alpha_n)}&\cos{(\theta+\alpha_n)}&R\\
   \end{bmatrix}
   \begin{bmatrix}
      \cos{(\theta)}&0&0\\
      0&\cos{(\theta)}&0\\
      0&0&1\\
   \end{bmatrix}
   \begin{bmatrix}
      \dot{\boldsymbol{x}_{\mathrm{L}}}\\
      \dot{\boldsymbol{y}_{\mathrm{L}}}\\
      \dot{\boldsymbol{\theta}}\\
   \end{bmatrix}
\end{align*}
$$

<!-- begin ignore -->
ã™ãªã‚ã¡
<!-- end ignore -->

$$
\dot{\boldsymbol{\phi}}_n=\frac{-\sin{(\theta+\alpha_n)}\cos{(\theta)}\dot{\boldsymbol{x}_{\mathrm{L}}}+\cos{(\theta+\alpha_n)}\cos{(\theta)}\dot{\boldsymbol{y}_{\mathrm{L}}}+R\dot{\boldsymbol{\theta}}}{r}
$$

ã“ã‚Œã§, ä»»æ„ã®æ•°ã®ãƒ›ã‚¤ãƒ¼ãƒ«ã‚’æŒã¤, å…¨æ–¹ä½ãƒ­ãƒœãƒƒãƒˆã«ãŠã‘ã‚‹å„ãƒ›ã‚¤ãƒ¼ãƒ«ã®è§’é€Ÿåº¦ãŒæ±‚ã‚ã‚‰ã‚ŒãŸ.

# å‚è€ƒã‚µã‚¤ãƒˆ

- [ã‚ªãƒ ãƒ‹ãƒ›ã‚¤ãƒ¼ãƒ«ã‚’ç”¨ã„ãŸå…¨æ–¹å‘ç§»å‹•è»Šã®è£½ä½œã¨åˆ¶å¾¡](https://blog.tokor.org/2015/05/14/%E3%82%AA%E3%83%A0%E3%83%8B%E3%83%9B%E3%82%A4%E3%83%BC%E3%83%AB%E3%82%92%E7%94%A8%E3%81%84%E3%81%9F%E5%85%A8%E6%96%B9%E5%90%91%E7%A7%BB%E5%8B%95%E8%BB%8A%E3%81%AE%E8%A3%BD%E4%BD%9C%E3%81%A8%E5%88%B6%E5%BE%A1/)
